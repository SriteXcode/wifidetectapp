<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wi-Fi Scanner PWA</title>
<link rel="manifest" href="manifest.json">
<style>
body { font-family: sans-serif; padding: 20px; background:#f1f1f1; }
h1 { color: #d00; }
ul { list-style: none; padding: 0; }
li { background: #fff; margin: 5px 0; padding: 10px; border-radius:5px; }
header { font-size: 2em; margin-bottom: 20px; }
footer { margin-top: 40px; font-size: 0.9em; color: gray; }
</style>
</head>
<body>
<header id="welcome">Loading...</header>
<h1>Available Wi-Fi Networks</h1>
<ul id="networks"></ul>

<h2>Duplicate SSIDs</h2>
<ul id="duplicates"></ul>
<footer id="footer">Loading...</footer>
<script src="config.js"></script>
<script>
async function fetchNetworks() {
    try {
        const res = await fetch(`${CONFIG.BACKEND_URL}/networks`);
        const data = await res.json();
        
        const networksEl = document.getElementById("networks");
        networksEl.innerHTML = "";
        data.networks.forEach((ssid, i) => {
            networksEl.innerHTML += `<li>${i+1}. ${ssid}</li>`;
        });

        const duplicatesEl = document.getElementById("duplicates");
        duplicatesEl.innerHTML = "";
        data.duplicates.forEach(dup => {
            duplicatesEl.innerHTML += `<li>${dup.SSID} â†’ ${dup.Count} times</li>`;
        });

    } catch(e) {
        console.error(e);
    }
}


async function loadTexts() {
    try {
        const res = await fetch(`${CONFIG.BACKEND_URL}/texts`); // or your deployed backend URL
        const data = await res.json();
        document.getElementById("welcome").textContent = data.welcome;
        document.getElementById("footer").textContent = data.footer;
    } catch (err) {
        console.error("Error fetching texts:", err);
    }
}

async function loadContent() {
    try {
        const res = await fetch(`${API_URL}/`);
        const data = await res.json();

        document.getElementById("welcome").innerText = data.welcome;
        document.getElementById("footer").innerText = data.footer;
    } catch (err) {
        console.error(err);
    }
}

loadContent();
fetchNetworks();
loadTexts();
</script>
</body>
</html>
